<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:Visio.ViewModels"
             x:Class="Visio.Views.MainPage"
             x:DataType="vm:MainViewModel">

    <Grid ColumnDefinitions="*,250" BackgroundColor="#1E1E1E">
        
        <Image Grid.Column="0"
               Source="{Binding CurrentFrame}" 
               Aspect="AspectFit"
               BackgroundColor="Black"
               Margin="10"/>
        
        <ScrollView Grid.Column="1" BackgroundColor="#252525">
            <VerticalStackLayout Padding="15" Spacing="20">
                
                <Border BackgroundColor="#1E1E1E" 
                        Padding="10"
                        StrokeThickness="1"
                        Stroke="#2196F3">
                    <VerticalStackLayout Spacing="5">
                        <Label Text="Status" 
                               FontSize="14" 
                               FontAttributes="Bold" 
                               TextColor="Gray"/>
                        <Label Text="{Binding StatusMessage}" 
                               TextColor="{Binding StatusColor}"
                               FontSize="16"
                               FontAttributes="Bold"/>
                    </VerticalStackLayout>
                </Border>
                
                <BoxView HeightRequest="1" Color="#3E3E3E"/>
                
                <Label Text="Conexão" 
                       FontSize="16" 
                       FontAttributes="Bold" 
                       TextColor="White"/>
                
                <Entry Text="{Binding RtspUrl}" 
                       Placeholder="rtsp://..."
                       TextColor="White" 
                       PlaceholderColor="Gray"
                       BackgroundColor="#1E1E1E"/>
                
                <Button Text="Conectar" 
                        Command="{Binding ConnectCommand}" 
                        BackgroundColor="#4CAF50" 
                        TextColor="White"
                        HeightRequest="45"/>
                
                <Button Text="Desconectar" 
                        Command="{Binding DisconnectCommand}" 
                        BackgroundColor="#363636ff" 
                        TextColor="White"
                        HeightRequest="45"/>
                
                <BoxView HeightRequest="1" Color="#3E3E3E"/>
                
                <Label Text="Filtros" 
                       FontSize="16" 
                       FontAttributes="Bold" 
                       TextColor="White"/>
                
                <HorizontalStackLayout Spacing="10">
                    <CheckBox IsChecked="{Binding IsGrayscaleEnabled}" Color="#2196F3"/>
                    <Label Text="Escala de Cinza" 
                           TextColor="White" 
                           VerticalOptions="Center"/>
                </HorizontalStackLayout>
                
                <HorizontalStackLayout Spacing="10">
                    <CheckBox IsChecked="{Binding IsBlurEnabled}" Color="#2196F3"/>
                    <Label Text="Desfoque" 
                           TextColor="White" 
                           VerticalOptions="Center"/>
                </HorizontalStackLayout>
                
                <HorizontalStackLayout Spacing="10">
                    <CheckBox IsChecked="{Binding IsEdgeDetectionEnabled}" Color="#2196F3"/>
                    <Label Text="Detecção de Bordas" 
                           TextColor="White" 
                           VerticalOptions="Center"/>
                </HorizontalStackLayout>
                
                <HorizontalStackLayout Spacing="10">
                    <CheckBox IsChecked="{Binding IsFaceDetectionEnabled}" Color="#2196F3"/>
                    <Label Text="Detecção Facial" 
                           TextColor="White" 
                           VerticalOptions="Center"/>
                </HorizontalStackLayout>
                
                <BoxView HeightRequest="1" Color="#3E3E3E"/>
                
                <Label Text="Captura" 
                       FontSize="16" 
                       FontAttributes="Bold" 
                       TextColor="White"/>
                
                <Button Text="📸 Capturar Foto" 
                        Command="{Binding CaptureSnapshotCommand}"
                        BackgroundColor="#2196F3" 
                        TextColor="White" 
                        HeightRequest="50"/>
                
            </VerticalStackLayout>
        </ScrollView>
    </Grid>
</ContentPage>
